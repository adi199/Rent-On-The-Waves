<!DOCTYPE html>
<html>
  <head>
    <title>Boats rental</title>
    <link href="/stylesheets/boatDetailStyle.css" rel="stylesheet">
    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!-- Bootstrap-datepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/vader/jquery-ui.css" rel="stylesheet"/>
  </head>
  <body>
    <%- include navbar.ejs %>
    <p id="meta" style="display: none;"><%= boat._id %></p>
    <div class="contianer h-100 ms-5 me-5">
        <div class="row justify-content-md-center">
            <div class="col col-lg-7">
                <!-- Intro section -->
                <div class="row mt-4 mb-5">
                    <div class="col">
                        <img src="/images/<%= boat.image %>" class="img-fluid rounded" alt="Image">
                    </div>
                    <div class="col col-lg-4">
                        <div class="row">
                            <div class="col">
                                <p class="fs-3"><%- boat.title %></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="card">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item"><%- boat.location %></li>
                                        <li class="list-group-item"><%- boat.no_of_passengers %></li>
                                        <% if(boat.captain_available) { %>
                                            <li class="list-group-item">Captain is available</li>
                                        <% } else { %>
                                            <li class="list-group-item">No Captain</li>
                                        <% } %>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr style="width:50%;text-align:left;margin-left:0">
                <!-- specification section -->
                <div class="row mb-5">
                    <div class="col">
                        <p class="fs-3">Details</p>
                        <p class="fs-5"><%= boat.detail %></p>
                    </div>
                    <div class="col col-lg-5">
                        <div class="row mb-5">
                            <div class="col">
                                <div class="card">
                                    <div class="card-header">
                                        <p class="fs-3">Features</p>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <% boat.features.forEach(function(feature){ %>
                                            <li class="list-group-item"><%- feature %></li>
                                        <% }); %>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="row ms-1 mb-5 border">
                            <div class="col">
                                <p class="fs-3">Specifications</p>
                                <dl class="row">
                                    <dt class="col-sm-3">Year</dt>
                                    <dd class="col-sm-9"><%= boat.specification.year %></dd>
                                    <dt class="col-sm-3">Length</dt>
                                    <dd class="col-sm-9"><%= boat.specification.length %> ft</dd>
                                    <dt class="col-sm-3">Make</dt>
                                    <dd class="col-sm-9"><%= boat.specification.make %></dd>
                                    <dt class="col-sm-3">Model</dt>
                                    <dd class="col-sm-9"><%= boat.specification.model %></dd>
                                    <dt class="col-sm-3">Capcity</dt>
                                    <dd class="col-sm-9">Up to <%= boat.specification.capacity %> people</dd>
                                    <dt class="col-sm-3">Boat Type</dt>
                                    <dd class="col-sm-9"><%= boat.specification.boat_type %></dd>
                                </dl>
                            </div>
                        </div>
                        <div class="row ms-1 mb-5 border">
                            <div class="col">
                                <dl class="row">
                                    <p class="fs-3">Booking options</p>
                                    <dt class="col-sm-3">Hourly charge</dt>
                                    <dd class="col-sm-9"><%= boat.base_rate %></dd>
                                    <dt class="col-sm-3">Maximum hours available</dt>
                                    <dd class="col-sm-9"><%= boat.max_hours_available %></dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                
                <hr style="width:50%;text-align:left;margin-left:0">
                <!-- things to know section -->
                <div class="row mb-5">
                    <div class="col">
                        <p class="fs-3">Things to know</p>
                    </div>
                    <div class="col col-lg-5">
                        <!-- Allowed on boat -->
                        <div class="row mb-5">
                            <div class="col">
                                <div class="card">
                                    <div class="card-header">
                                        <p class="fs-3">Allowed on boat</p>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <% boat.allowed_on_boat.forEach(function(feature){ %>
                                            <li class="list-group-item"><%- feature %></li>
                                        <% }); %>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- Cancellation policy -->
                        <div class="row mb-5">
                            <div class="col">
                                <div class="card">
                                    <div class="card-header">
                                        <p class="fs-3">Cancellation Policy</p>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <% boat.cancellation_policy.forEach(function(feature){ %>
                                            <li class="list-group-item"><%- feature %></li>
                                        <% }); %>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- Security deposit -->
                        <div class="row mb-5">
                            <div class="col">
                                <p class="fs-4">Security Deposit</p>
                                <p class="fs-5"><%= boat.security_deposit %></p>
                            </div>
                        </div>
                        <!-- Captain Info -->
                        <div class="row mb-5">
                            <div class="col">
                                <p class="fs-4">Captain Info</p>
                                <p class="fs-5"><%= boat.captain_info %></p></div>
                        </div>
                    </div>
                </div>
                <hr style="width:50%;text-align:left;margin-left:0">
                <!-- Owner section -->
                <div class="row">
                    <div class="col"></div>
                </div>  
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="bookingModal" class="modal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-body">
                <form id="bookingForm">
                    <div class="row">
                        <div class="col-md-6">
                            <label for="bookingStartTime" class="form-label">Hours</label>
                            <select id="bookingStartTime" class="form-select">
                                <% for(var i=1;i<=boat.max_hours_available;i++){ %>
                                    <option value="<%= i %>"><%= i %>:00</option>
                                <% } %>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="bookingHours" class="form-label">Start Time</label>
                            <select id="bookingHours" class="form-select">
                                <% let currentHour = (new Date()).getHours(); %>
                                <% currentHour += 1; %>
                                <% while(currentHour <= 24){ %>
                                    <option value="<%= currentHour %>"><%= currentHour %>:00</option>
                                    <% currentHour += 1; %>
                                <% } %>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="bookingDate" class="form-label">Date</label>
                            <input type="text" id="bookingDate">    
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary" form="bookingForm">Book</button>
            </div>
          </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center text-white fixed-bottom" style="background-color: #21081a;">
        <div class="container p-4">
            <button type="button" id="bookBoatButton" class="btn btn-light">Book</button>
        </div>
    </footer>
    <script src="/javascripts/boatDetailScript.js"></script>
  </body>
</html>